<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tesla - Model S</title>
    <link rel="stylesheet" href="style.css" />

    <!-- Include Iterable Web SDK -->
<script src="https://unpkg.com/@iterable/web-sdk/index.js"></script>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Check if Iterable SDK is loaded before executing
        var interval = setInterval(function () {
          if (window.Iterable) {
            clearInterval(interval);

            // Securely fetch API key from environment (if applicable)
            const API_KEY = "8c641f7927bc4c8da562f28d04563bc5"; // Replace with secure method if possible

            // Initialize Iterable
            Iterable.initialize(API_KEY, {
              autoPushSubscribe: true, // Ask for push notification permission
              verbose: true, // Enable logging
            });

            // Identify user (replace with dynamic user data if available)
            Iterable.setUserId("Taylan.Somani@gmail.com");

            // Track "Reserve Now" button click
            function trackReserveNow() {
              Iterable.track("Reserve Now Clicked", {
                model: "Model S",
                page: window.location.pathname,
              });
            }

            // Attach event listener to the "Reserve Now" button
            document.querySelector(".btn").addEventListener("click", trackReserveNow);
          }
        }, 100); // Check every 100ms
      });
    </script>
  </head>
  <body class="models">
    <div class="header" id="header">
      <nav>
        <img src="images/logo.png" class="logo" />
        <ul>
          <li><a href="index.html">Model S</a></li>
          <li><a href="model3.html">Model 3</a></li>
          <li><a href="modelx.html">Model X</a></li>
          <li><a href="modely.html">Model Y</a></li>
        </ul>
        <a href="#" class="btn">Reserve Now</a>
      </nav>

      <div class="info">
        <div>
          <h2>1.9 s</h2>
          <p>60 mph</p>
        </div>
        <div>
          <h2>200 mph</h2>
          <p>Top Speed</p>
        </div>
        <div>
          <h2>390 mi</h2>
          <p>Max Range</p>
        </div>
        <div class="line"></div>
        <div>
          <h2 id="model">Model S</h2>
        </div>
      </div>
    </div>
  </body>
</html>
