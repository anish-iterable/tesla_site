<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tesla - Model S</title>
    <link rel="stylesheet" href="style.css" />

    <script>
        async function initializeIterable() {
            try {
                // Import Iterable SDK dynamically
                const IterableModule = await import("https://unpkg.com/@iterable/web-sdk/index.js");
                const Iterable = IterableModule.default || IterableModule; // Handle module exports

                if (!Iterable) {
                    console.error("Iterable SDK is still not available after import.");
                    return;
                }

                // Check if email is already stored in Local Storage
                let storedEmail = localStorage.getItem("iterable_email");

                if (!storedEmail) {
                    // If no email is set, define a new one (this will be used for tracking)
                    storedEmail = "Claude@iterable.com";
                    localStorage.setItem("iterable_email", storedEmail);
                    console.log(`üì© New email set in local storage: ${storedEmail}`);
                } else {
                    console.log(`üîÑ Retrieved stored email: ${storedEmail}`);
                }

                // Initialize Iterable SDK
                const iterable = await Iterable.init({
                    apiKey: 'c2d7324bd5a84684a7ebb14a985a4aa1', // Your API Key
                    disableSecurity: true // No JWT required
                });

                // Set email in Iterable (required for making API calls)
                await iterable.setEmail(storedEmail);
                console.log("‚úÖ Iterable Web SDK initialized with email:", storedEmail);

            } catch (error) {
                console.error("‚ùå Error loading Iterable SDK:", error);
            }
        }

        document.addEventListener("DOMContentLoaded", initializeIterable);
    </script>
</head>

<body class="models">
    <div class="header" id="header">
        <nav>
            <img src="images/logo.png" class="logo" />
            <ul>
                <li><a href="index.html">Model S</a></li>
                <li><a href="model3.html">Model 3</a></li>
                <li><a href="modelx.html">Model X</a></li>
                <li><a href="modely.html">Model Y</a></li>
            </ul>
            <a href="#" class="btn">Reserve Now</a>
        </nav>
        <div class="info">
            <div>
                <h2>1.9 s</h2>
                <p>60 mph</p>
            </div>
            <div>
                <h2>200 mph</h2>
                <p>Top Speed</p>
            </div>
            <div>
                <h2>390 mi</h2>
                <p>Max Range</p>
            </div>
            <div class="line"></div>
            <div>
                <h2 id="model">Model S</h2>
            </div>
        </div>
    </div>
</body>

</html>
