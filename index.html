async function initializeIterable() {
    try {
        if (!window.Iterable) {
            console.error("Iterable SDK not loaded.");
            return;
        }

        // Check if email is already stored in Local Storage
        let storedEmail = localStorage.getItem("iterable_email");

        if (!storedEmail) {
            storedEmail = "Claude@iterable.com"; // Replace with user email dynamically if needed
            localStorage.setItem("iterable_email", storedEmail);
            console.log(`üì© New email set in local storage: ${storedEmail}`);
        } else {
            console.log(`üîÑ Retrieved stored email: ${storedEmail}`);
        }

        // Initialize Iterable SDK
        await Iterable.init({
            apiKey: 'c2d7324bd5a84684a7ebb14a985a4aa1', // Your actual API key
            disableSecurity: true 
        });

        // Set email in Iterable
        await Iterable.setEmail(storedEmail);
        console.log("‚úÖ Iterable Web SDK initialized with email:", storedEmail);

    } catch (error) {
        console.error("‚ùå Error loading Iterable SDK:", error);
    }
}

document.addEventListener("DOMContentLoaded", initializeIterable);
